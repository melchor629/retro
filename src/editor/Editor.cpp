#include <Editor.hpp>
#include <algorithm>
#include <cmath>
#include <cstring>
#include <glm/vec4.hpp>
#include <chrono>
#include <cmath>
#include <Level.hpp>
#include <Platform.hpp>
#include <utf8.h>

#undef min
#undef max

#define retroeditor

using namespace retro;
using namespace glm;
using namespace std;

#include "SelectMapFileScreen.hpp"

#include "CreateMapFileScreen.hpp"

#include "MapEditorScreen.hpp"

#include "SelectSpritesFileScreen.hpp"

#include "CreateSpritesFileScreen.hpp"

#include "SpritesEditorScreen.hpp"

static const char* mapIcon =
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365"
"KK\377\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377"
"\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000"
"\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\365"
"KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000"
"\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\314"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\365KK\314\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000weP\361weP\361\000\000\000\000we"
"P\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000"
"\000\000weP\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000weP\361\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000weP\361w"
"eP\361\000\000\000\000weP\361weP\361\365KK\215weP\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000weP\361\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000weP\361"
"\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\377\023\216\361\377\023\216\361"
"\377\023\216\361\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\365KK\215\000\000\000\000\000\000\000\000\377\023\216\361\377\023\216\361\000\000\000\000\377"
"\023\216\361\376\026\212\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000weP\361\000\000"
"\000\000\365KK\215\000\000\000\000\000\000\000\000\377\023\216\361\377\023\216\361\377\023\216\361"
"\377\023\216\361\376\026\212\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000weP\361"
"\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\377\023\216\361\377\023\216\361"
"\377\023\216\361\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000weP\361"
"\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\377\023\216\361\377\023\216\361\377\023\216"
"\361\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215weP\361"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\377\023\216\361\000\000\000\000\365KK\377\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000weP\361weP"
"\361\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365"
"KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365"
"KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377"
"\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\365KK\215\000\000\000\000\000\000\000\000"
"\365KK\377\365KK\377\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000"
"\365KK\215\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\365KK\377\365KK\377\000\000\000\000\365KK\215\365KK\377\365KK\377\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\365KK\215\000"
"\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\377\365KK\377\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000";;
static const char* spriteIcon =
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000weP\361weP\361weP\361weP\361weP\361weP\361weP\361"
"weP\361weP\361weP\361weP\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000\365"
"KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000weP\361weP\361weP\361"
"weP\361weP\361weP\361weP\361weP\361weP\361weP\361weP\361\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000weP\361weP\361weP\361weP\361weP\361weP\361weP\361weP\361weP\361w"
"eP\376weP\361\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000\000\000\000\000\000\000\000\000\365"
"KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\365KK\000\365KK\000\000\000\000\000\000\000\000\000weP\361weP\361weP\361weP\361weP\361w"
"eP\361weP\361weP\361weP\361weP\376weP\361\000\000\000\000\365KK\000\365KK\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000weP\361w"
"eP\361weP\361weP\361weP\361weP\361weP\361weP\361weP\361weP\376weP\361\365"
"KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\365KK\000\000\000\000\000\330\323\323\377\011\004\004\377\011\004\004\377weP\361weP\361"
"weP\361weP\361weP\361weP\361weP\361weP\361\365KK\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\377\330\323\323\376\330"
"\323\323\376\330\323\323\377\330\323\323\377\011\004\004\377weP\361weP\361weP"
"\361weP\361weP\361weP\361weP\361weP\361\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377\330\323\323\377"
"\330\323\323\377\330\323\323\377\330\323\323\377weP\361weP\361weP\361weP"
"\361weP\361weP\361weP\361weP\361\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377\261NN\377\261NN\377\330\323"
"\323\377\330\323\323\377\330\323\323\377\261NN\017\000\000\000\361\000\000\000\361\000\000"
"\000\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000"
"\000\000\000weP\000weP\000\000\000\000\000\261NN\361\261NN\377\261NN\377\261NN\377\261NN\377"
"\330\323\323\377\330\323\323\377\330\323\323\376\000\000\000\361\000\000\000\361\000\000"
"\000\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365"
"KK\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377\261NN\377\261NN\377\261"
"NN\377\261NN\377\261NN\377\261NN\377\330\323\323\377\000\000\000\361\000\000\000\361"
"\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000"
"\000\000\361\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377\261NN\377"
"\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\247JJ\376\000\000\000\361\000"
"\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000"
"\000\361\000\000\000\361\000\000\000\361\000\000\000\361\377\023\216\000\377\023\216\000\365KK\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377"
"\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\361\000"
"\000\000\361\000\000\000\361\000\000\000\361\000\000\000\376\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\361\000\000\000\361\000\000\000\361\377\023\216\000\000\000\000\361\000\000\000\000\377\023\216\000"
"\376\026\212\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\261"
"NN\361\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN"
"\377\261NN\361\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361"
"\000\000\000\361\000\000\000\376\000\000\000\361\000\000\000\000\000\000\000\000\377\023\216\000\377\023\216\000"
"\377\023\216\000\377\023\216\000\376\026\212\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365"
"KK\000\000\000\000\000\261NN\361\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377"
"\261NN\377\261NN\377\261NN\361\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000"
"\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\365KK\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\377\023\216\000\377\023\216\000\377\023\216\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\365KK\000\000\000\000\000\261NN\361\261NN\377\261NN\377\261NN\377\261NN"
"\377\261NN\377\261NN\377\261NN\377\261NN\361\000\000\000\000\000\000\000\000\000\000\000\361\000"
"\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000weP\000\365KK\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\377\023\216\000\377\023\216\000\377\023\216\000\365KK\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\365KK\000\261NN\361\261NN\377\261NN\377\261NN\377\261NN\377\261"
"NN\377\261NN\377\261NN\377\261NN\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000"
"\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000weP\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\377\023\216\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\365KK\000\261NN\361\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261"
"NN\377\261NN\377\261NN\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000"
"\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000weP\000weP\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261"
"NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN"
"\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000"
"\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377\261"
"NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\377\261NN\361\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000"
"\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\277\261NN\377\261NN\377"
"\261NN\377\261NN\377\261NN\377\261NN\377\261NN\361\365KK\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000"
"\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\277\261NN\337\261NN\337\261NN"
"\377\261NN\377\261NN\377\261NN\377\261NN\361\365KK\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\361\000\000\000\000\365"
"KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000"
"\000\000\000\000\000\000\261NN\376\261NN\377\261NN\377\261NN\337\261NN\337\261NN\277"
"\261NN\377\261NN\377\261NN\361\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\361\365KK\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\261NN\361\261NN\361\261NN\377\261NN\377\261NN\277\261NN"
"\226\261NN\351\261NN\361\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361"
"\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\365KK\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\261NN\361\261NN\377\261NN\377\261NN\322\261NN\244"
"\000\000\000\000\000\000\000\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\365"
"KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\365KK\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\261NN\361\261NN\361\261NN\377\261NN\361\000\000\000\000\000\000\000\000"
"\365KK\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\361\000\000\000\361\000\000\000\000\365KK\000\365"
"KK\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\261NN\376\365KK\000\365KK\000\000\000\000\000\365KK\000\365KK\000\365KK"
"\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000\365KK\000\000\000\000\361"
"\000\000\000\361\000\000\000\361\365KK\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\365KK\000\365KK\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000"
"\000\000\361\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\361\000\000\000\361\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
"\000\000";

void Editor::setPalette(const char* path) {
    importPalette(path);
}

void Editor::setFont(const char* path) {
    loadFont(path);
}

void Editor::setup() {
    addLevel<SelectSpritesFileScreen>("selectSpritesFileScreen", true);
    addLevel<CreateSpritesFileScreen>("createSpritesFileScreen");
    addLevel<SpritesEditorScreen>("spritesEditorScreen");
    
    addLevel<SelectMapFileScreen>("selectMapFileScreen");
    addLevel<CreateMapFileScreen>("createMapFileScreen");
    addLevel<MapEditorScreen>("mapEditorScreen");
    
    spriteLevel = &getLevel<SelectSpritesFileScreen>("selectSpritesFileScreen");
    mapLevel = &getLevel<SelectMapFileScreen>("selectMapFileScreen");
    
    getWindow().setTitle("Sprite Editor - retro++ editor");
    getWindow().setIcon((void*) spriteIcon, { 32, 32 }, 8, 4);
}

void Editor::cleanup() {
    
}

void Editor::changeToNewSpriteFile() {
    changeLevel("createSpritesFileScreen");
}

void Editor::changeToSpriteFileSelector() {
    this->spriteFile = {};
    changeLevel("selectSpritesFileScreen");
}

void Editor::changeToSpriteEditor(const string &path) {
    this->spriteFile = Sprites { path, *this };
    getLevel<SpritesEditorScreen>("spritesEditorScreen").setSprites(&this->spriteFile.value());
    changeLevel("spritesEditorScreen");
}


void Editor::changeToNewMapFile() {
    changeLevel("createMapFileScreen");
}

void Editor::changeToMapFileSelector() {
    changeLevel("selectMapFileScreen");
}

void Editor::changeToMapEditor(const std::string &map) {
    mapFile = Map(map, *this);
    getLevel<MapEditorScreen>("mapEditorScreen").setStuff(*mapFile);
    changeLevel("mapEditorScreen");
}

void Editor::checkChangeModeInput(GameActions& ga, int scancode) {
    if(ga.isModKeyPressed(KMOD_CTRL) || ga.isModKeyPressed(KMOD_GUI)) {
        if(scancode == SDL_SCANCODE_1) {
            changeToSpriteMode();
        } else if(scancode == SDL_SCANCODE_2) {
            changeToMapMode();
        }
    }
}

void Editor::changeToMapMode() {
    if(mode != MAP) {
        if(mode == SPRITE) {
            spriteLevel = getCurrentLevel();
        }

        changeLevel(mapLevel->getName());
        getWindow().setTitle("Map Editor - retro++ editor");
        getWindow().setIcon((void*) mapIcon, { 32, 32 }, 8, 4);
        mode = MAP;
    }
}

void Editor::changeToSpriteMode() {
    if(mode != SPRITE) {
        if(mode == MAP) {
            mapLevel = getCurrentLevel();
        }
        
        changeLevel(spriteLevel->getName());
        getWindow().setTitle("Sprite Editor - retro++ editor");
        getWindow().setIcon((void*) spriteIcon, { 32, 32 }, 8, 4);
        mode = SPRITE;
    }
}

Editor::Editor(const Builder &builder): Game(builder) {}
